# mako

> A pluggable build tool built around dependency trees.

[![npm version][npm-badge]][npm]
[![travis build status][travis-badge]][travis]
[![appveyor build status][appveyor-badge]][appveyor]
[![coveralls status][coveralls-badge]][coveralls]
[![code style][standard-badge]][standard]
[![gitter][gitter-badge]][gitter]


## What is this?

This is a build framework that specializes in working with projects that have
complex dependency trees. It is highly configurable and relies on
[plugins][plugins] to determine how the build runs.

This means it can be used in a wide variety of use-cases, such as building a
[front-end project][mako-browser] (similar to [Browserify][browserify] and
[webpack][webpack]), or a [static site][mako-static-site] (similar to
[metalsmith][metalsmith]). The plugin system is both robust and flexible,
opening up many possibilities.

Check out the [the wiki][wiki] for resources on getting started.


## How does it work?

The main flow for a mako **build** goes through 2 distinct phases: **parse** and
**compile**.

The **parse** phase reads files from some source, (typically the local
filesystem) identifies dependencies, then kicks off parse recursively as new
files are discovered. Throughout this process, a **dependency tree** is being
generated.

The **compile** phase takes the dependency tree generated by parse, and prepares
to write the output files. (typically, also the local filesystem) During this
phase, the tree could be deconstructed somewhat, such as when a tree of
dependencies is combined into a single output file.

Throughout both of these phases are steps called [hooks][hooks], which are
configured by [plugins][plugins]. Check out [the wiki][wiki] for more resources
about mako's internals.


## About plugins

[Plugins][plugins] are **absolutely necessary** for mako to be useful. It was
important for this tool to be flexible, so much inspiration was taken from
[Metalsmith][metalsmith].


## Usage

The easiest way to get up and running with mako is to use the [CLI][cli]. For
web-based projets, there is also a lightweight [development server][server]. For
advanced users, this module defines the public API:

```js
var mako = require('mako');
var browser = require('mako-browser');

mako()                      // create a new runner
  .use(browser())           // add plugins (this is a bundle of plugins)
  .build('./index.js')      // run a build for index.js (assumed to be in pwd)
  .then(function (build) {  // this is a promise-based API
    // done
  });
```


[appveyor-badge]: https://img.shields.io/appveyor/ci/makojs/mako.svg
[appveyor]: https://ci.appveyor.com/project/makojs/mako
[browserify]: http://browserify.org/
[cache]: https://github.com/makojs/cache
[cli]: https://github.com/makojs/cli
[coveralls-badge]: https://img.shields.io/coveralls/makojs/mako.svg
[coveralls]: https://coveralls.io/github/makojs/mako
[gitter-badge]: https://img.shields.io/gitter/room/makojs/general.svg
[gitter]: https://gitter.im/makojs/general
[hooks]: https://github.com/makojs/core/wiki/Hooks
[mako-browser]: http://github.com/makojs/browser
[mako-static-site]: http://github.com/makojs/static-site
[mako-tree]: https://github.com/makojs/tree
[metalsmith]: http://metalsmith.io/
[npm-badge]: https://img.shields.io/npm/v/mako.svg
[npm]: https://www.npmjs.com/package/mako
[plugins]: https://github.com/makojs/core/wiki/Plugins
[server]: https://github.com/makojs/serve
[standard-badge]: https://img.shields.io/badge/code%20style-standard-brightgreen.svg
[standard]: http://standardjs.com/
[travis-badge]: https://img.shields.io/travis/makojs/mako.svg
[travis]: https://travis-ci.org/makojs/mako
[webpack]: https://webpack.github.io/
[wiki]: http://github.com/makojs/core/wiki
